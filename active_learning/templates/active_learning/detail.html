{% load static %}

<link rel="stylesheet" type="text/css" href="{% static 'active_learning/style.css' %}" />

<div class="detail_page">

  <div class="header">
    <div class="title">
      <a href="{{article.url}}">{{ article.title }}</a>
    </div>

    <div class="query">
      <label for="query">News query</label>
      <span id="query">{{ article.query.search_query }}</span>
    </div>

    <div class="date_accessed">
      <label for="date_accessed">Date Accessed</label>
      <span id="date_accessed">{{ article.date_accessed }}</span>
    </div>
  </div>

  <div class="buttons">
    <button type="button" id="yes" name="button">Yes</button>
    <button type="button" id="no" name="button">No</button>
  </div>

  <div class="text">
      <p id="text">{{ article.text }}</p>
  </div>
</div>

<script type="text/javascript">
  function label(label){
    if (parent.channel != undefined && parent.idOfArticleToLabel != null) {
      sent = parent.channel.trigger('client-label', {label: label})
      // HACK: inline CSS
      document.write('<style media="screen">/* loading CSS from http://tobiasahlin.com/spinkit/ */body{ background-color: #2196F3; display: flex; flex-flow: row wrap; justify-content: center; align-items: center;}.spinner { width: 5vw; height: 5vw; position: relative; margin: 100px auto;}.double-bounce1, .double-bounce2 { width: 100%; height: 100%; border-radius: 50%; background-color: #fff; opacity: 0.6; position: absolute; top: 0; left: 0; -webkit-animation: sk-bounce 2.0s infinite ease-in-out; animation: sk-bounce 2.0s infinite ease-in-out;}.double-bounce2 { -webkit-animation-delay: -1.0s; animation-delay: -1.0s;}@-webkit-keyframes sk-bounce { 0%, 100% { -webkit-transform: scale(0.0) } 50% { -webkit-transform: scale(1.0) }}@keyframes sk-bounce { 0%, 100% { transform: scale(0.0); -webkit-transform: scale(0.0); } 50% { transform: scale(1.0); -webkit-transform: scale(1.0); }}</style><div class="spinner"> <div class="double-bounce1"></div> <div class="double-bounce2"></div></div>')
      if (sent){
        parent.toLabel = null
      }
    } else {
      alert("can't do that right now")
    }
  }

  document.getElementsByClassName('buttons')[0].addEventListener('click', function(event){
    if (event.target.tagName === 'BUTTON'){
      label(event.target.id)
    }
  })
</script>
